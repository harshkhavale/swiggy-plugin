(()=>{"use strict";const e=window.wp.element,t=window.ReactJSXRuntime;function a({attributes:a}){const{filter:s,search:r}=a,[c,l]=(0,e.useState)([]),[n,i]=(0,e.useState)([]),[o,d]=(0,e.useState)(r);async function h(e=s,t=r){try{let a=`https://www.themealdb.com/api/json/v1/1/filter.php?a=${e}`;t&&(a=`https://www.themealdb.com/api/json/v1/1/search.php?s=${t}`);const s=await fetch(a),r=await s.json();l(r.meals||[])}catch(e){console.error("Error fetching meals:",e)}}return(0,e.useEffect)((()=>{!async function(){try{const e=await fetch("https://www.themealdb.com/api/json/v1/1/list.php?a=list"),t=await e.json();i(t.meals||[])}catch(e){console.error("Error fetching areas:",e)}}()}),[]),(0,e.useEffect)((()=>{h()}),[s,r]),(0,t.jsxs)("div",{className:"swiggy-plugin-block",children:[(0,t.jsxs)("div",{className:"header",children:[(0,t.jsxs)("div",{className:"area-filter",children:[(0,t.jsx)("label",{htmlFor:"area-select",children:"Select an Area:"}),(0,t.jsx)("select",{id:"area-select",onChange:e=>{const t=e.target.value;d(""),l([]),h(t)},value:s,children:n.map(((e,a)=>(0,t.jsx)("option",{value:e.strArea,children:e.strArea},a)))})]}),(0,t.jsxs)("div",{className:"search",children:[(0,t.jsx)("input",{type:"text",value:o,onChange:e=>d(e.target.value),id:"meal-search",placeholder:"Search for a meal..."}),(0,t.jsx)("button",{id:"search-btn",onClick:()=>{h(s,o)},children:"Search"})]})]}),(0,t.jsx)("div",{className:"food-menu",children:(0,t.jsx)("div",{className:"food-items",children:c&&c.length>0?c.map(((e,a)=>(0,t.jsxs)("div",{className:"food-item",children:[(0,t.jsx)("h3",{children:e.strMeal}),(0,t.jsx)("img",{src:e.strMealThumb,alt:e.strMeal})]},a))):(0,t.jsx)("p",{children:"No meals available."})})})]})}document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".wp-block-create-block-swiggy-plugin").forEach((e=>{if(!e.getAttribute("data-rendered")){const s=JSON.parse(e.getAttribute("data-attributes"));wp.element.render((0,t.jsx)(a,{attributes:s}),e),e.setAttribute("data-rendered","true")}}))}))})();